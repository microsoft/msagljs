"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[624],{9916:(e,t,a)=>{a.d(t,{xA:()=>d,yg:()=>u});var n=a(3696);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),g=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=g(e.components);return n.createElement(s.Provider,{value:t},e.children)},h="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),h=g(a),p=i,u=h["".concat(s,".").concat(p)]||h[p]||c[p]||r;return a?n.createElement(u,o(o({ref:t},d),{},{components:a})):n.createElement(u,o({ref:t},d))}));function u(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[h]="string"==typeof e?e:i,o[1]=l;for(var g=2;g<r;g++)o[g]=a[g];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},5217:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(3696),i=a(5715),r=a(8017);const o={mr1:"mr1_wIym",hidemobile:"hidemobile_Efjn"};function l(e){const{className:t,editorId:a,text:l,label:s="Edit",title:g="Load code in side editor"}=e,{setSource:d}=(0,i.Ay)();return n.createElement("button",{type:"button",title:g,className:(0,r.A)(o.hidemobile,o.mr1,t||"button button--primary"),onClick:()=>d(a,l)},s)}},7796:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>g,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var n=a(8102),i=(a(3696),a(9916)),r=a(5217);const o={sidebar_position:4},l="API of @msagl/core",s={unversionedId:"api",id:"api",title:"API of @msagl/core",description:"Use the layout engine directly",source:"@site/docs/api.md",sourceDirName:".",slug:"/api",permalink:"/msagljs/docs/api",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Configuration of the renderers",permalink:"/msagljs/docs/configuration"}},g={},d=[{value:"Use the layout engine directly",id:"use-the-layout-engine-directly",level:2},{value:"Create the graph, add geometry attributes to it, and call the default layout",id:"create-the-graph-add-geometry-attributes-to-it-and-call-the-default-layout",level:3},{value:"Sugiyama scheme, or layered layout.",id:"sugiyama-scheme-or-layered-layout",level:3},{value:"Short description of the method",id:"short-description-of-the-method",level:4},{value:"Current limtitations",id:"current-limtitations",level:5},{value:"Calling Sugiama Scheme",id:"calling-sugiama-scheme",level:4},{value:"Pivot Multidimensional Scaling, or Pivot MDS",id:"pivot-multidimensional-scaling-or-pivot-mds",level:3},{value:"The method background",id:"the-method-background",level:4},{value:"Calling MDS",id:"calling-mds",level:4},{value:"IPSepCola",id:"ipsepcola",level:3},{value:"Calling IPSepCola",id:"calling-ipsepcola",level:4},{value:"The default layout",id:"the-default-layout",level:3},{value:"Edge routing",id:"edge-routing",level:2},{value:"&quot;Spline&quot; routing mode",id:"spline-routing-mode",level:3},{value:"&quot;SplineBundling&quot; routing mode",id:"splinebundling-routing-mode",level:3},{value:"&quot;Rectilinear&quot; routing mode",id:"rectilinear-routing-mode",level:3},{value:"&quot;StraightLine&quot; routing mode",id:"straightline-routing-mode",level:3},{value:"Renderer with Deck.gl",id:"renderer-with-deckgl",level:2},{value:"Usage of SVG Renderer",id:"usage-of-svg-renderer",level:2},{value:"Renderer with SVG API",id:"renderer-with-svg-api",level:2}],h={toc:d},c="wrapper";function p(e){let{components:t,...o}=e;return(0,i.yg)(c,(0,n.A)({},h,o,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"api-of-msaglcore"},"API of @msagl/core"),(0,i.yg)("h2",{id:"use-the-layout-engine-directly"},"Use the layout engine directly"),(0,i.yg)("p",null,"When you interact with a renderer, many details are hidden under the hood.\nHere we show how to call the engine, @msagl/core, directly."),(0,i.yg)("h3",{id:"create-the-graph-add-geometry-attributes-to-it-and-call-the-default-layout"},"Create the graph, add geometry attributes to it, and call the default layout"),(0,i.yg)("p",null,"First we need to say a few words on the classes involved: Node, Graph, and Edge."),(0,i.yg)("p",null,"Edge is the simplest of these three: it has the source and the target that are Nodes.\nNode has three sets of Edges: outEdges, inEdges, and selfEdges.\nIf you have an object of Node available you can iterate over all edges adjacent to it.\nFor example, to process all edges having node 'n' as the source do the following:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"for (const e of n.outEdges()) {\n  // process edge 'e'\n}\n")),(0,i.yg)("p",null,"Graph extends Node, but in addition it has a NodeCollection, which is a wrapper\nof Map<string, Node>: this way a Graph references its nodes. To create a sub-graph we add a Graph as a new node to the graph."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"const graph = new Graph()\nconst subgraph = new Graph('a')\ngraph.addNode(subgraph)\n")),(0,i.yg)("p",null,"This design seems minimal and efficient enough to maintain the graph structure. For example, to iterate over all edges of the graph\nwe go over the nodes in the graph's NodeCollection and iterate over outgoing and self-edge of the nodes."),(0,i.yg)("p",null,"The classes Graph, Node, and Edge extend class Entity. Entity has a field parent that is also an Entity.\nThis way a Node, and an Edge, have a reference to the Graph they belongs to.\nClass Label facilitates labelled edges. The parent of a Label is the labeled edge."),(0,i.yg)("p",null,"Importantly, class Entity has an array of Attributes. The Attributes keep additional information associated with the graph entities.\nThere are geometry attributes, drawing attributes, and some others.\nThe geometry attributes are needed to create a layout. The drawing attributes are used during rendering.\nBy using attributes we avoid a duplication of the graph structure."),(0,i.yg)("p",null,"Now we show how to create a graph and lay it out with @msagl/core."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"//First we create a Graph, the underlying structure to keep your graph.\nconst graph = new Graph()\n// add some nodes and edges to the graph.\n// add a node with id 'b'\nconst b = new Node('b')\ngraph.addNode(b)\n// add a node with id 'c'\nconst c = new Node('c')\ngraph.addNode(c)\n// create edges b->c, and d->a\nconst bc = new Edge(b, c)\nnew Edge(b, c)\n")),(0,i.yg)("p",null,"The last statement of the code above"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"new Edge(b, c)\n")),(0,i.yg)("p",null,"creates an instance of class Edge and adds it to b.outEdges and c.inEdges.\nThis way the edge is attached to the graph.\nFor the engine to run the layout, each node has to have node.boundaryCurve defined. In this examples we create circular nodes."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"// create a geometry node gb\nconst gb = new GeomNode(b)\ngb.boundaryCurve = CurveFactory.mkCircle(20, new Point(0, 0))\n")),(0,i.yg)("p",null,"The two lines above create a GeomNode, gb, corresponding to node 'b',\nwhich is actually an Attribute that is stored in the array of attributes of node 'b'.\nThe code also sets the boundary curve describing the shape of 'gb': in this case it is\na circle with the radius of length 20 and the center at the origin of the plane. The layout might transform the\ncurve later by changing the circle center. In general, the layout does not depend on the node.boundaryCurve initial positions. We create geometry attributes for each element of the graph\nto interact with the layout, and, finally, call the layout engine. Below the whole working example."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts",metastring:"build",build:!0},"import {\n  CurveFactory,\n  Edge,\n  GeomEdge,\n  GeomGraph,\n  GeomNode,\n  Graph,\n  Node,\n  Point,\n  layoutGeomGraph,\n} from '@msagl/core'\nconst graph = new Graph()\n// add some nodes and edges to the graph.\n// add a node with id 'b'\nconst b = new Node('b')\ngraph.addNode(b)\n// add a node with id 'c'\nconst c = new Node('c')\ngraph.addNode(c)\n// create edges b->c, and d->a\nconst bc = new Edge(b, c)\nconst geomGraph = new GeomGraph(graph)\nconst gbc: GeomEdge = new GeomEdge(bc)\nconst gb = new GeomNode(b)\ngb.boundaryCurve = CurveFactory.mkCircle(20, new Point(0, 0))\nconst gc = new GeomNode(c)\ngc.boundaryCurve = CurveFactory.mkCircle(20, new Point(0, 0))\nlayoutGeomGraph(geomGraph)\nconsole.log(gbc.curve)\n")),(0,i.yg)("p",null,"This code produces the following output:",(0,i.yg)("br",{parentName:"p"}),"\n","'LineSegment {parStart: 0, parEnd: 1, start: Point { x",(0,i.yg)("em",{parentName:"p"},": 49.99999999999999, y"),": 30},",(0,i.yg)("br",{parentName:"p"}),"\n","end: Point { x",(0,i.yg)("em",{parentName:"p"},": 70, y"),": 30 }}'",(0,i.yg)("br",{parentName:"p"}),"\n","In many cases we would like to control the engine more than in the previos example.\nWe describe three methods of the layout that are implemented in the package."),(0,i.yg)("h3",{id:"sugiyama-scheme-or-layered-layout"},"Sugiyama scheme, or layered layout."),(0,i.yg)("h4",{id:"short-description-of-the-method"},"Short description of the method"),(0,i.yg)("p",null,"Sugiayama scheme sometimes is also called the hierarchical layout. It is meant for a directed graph. It organizes the nodes in horizontal layers and renders the edges following their direction.\nThere is an ",(0,i.yg)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Layered_graph_drawing."},"article")," describing the method.",(0,i.yg)("br",{parentName:"p"}),"\n","The implementation of the scheme in MSAGL closely follows ",(0,i.yg)("a",{parentName:"p",href:"https://www.researchgate.net/profile/Emden-Gansner/publication/3187542_A_Technique_for_Drawing_Directed_Graphs/links/5c0abd024585157ac1b04523/A-Technique-for-Drawing-Directed-Graphs.pdf"},"the paper of Dot/Graphviz authors"),". The differences of the implementation of MSAGL with the Dot approach are mostly described in ",(0,i.yg)("a",{parentName:"p",href:"https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/gd2007-glee.pdf"},"Drawing Graphs with GLEE")," and ",(0,i.yg)("a",{parentName:"p",href:"https://elar.urfu.ru/bitstream/10995/111368/1/2-s2.0-79952265484.pdf"},"Improving Layered Graph Layouts with Edge Bundling"),". The improvements are in the fast calculation of the layers, and the edge routing."),(0,i.yg)("h5",{id:"current-limtitations"},"Current limtitations"),(0,i.yg)("p",null,"The constraint functionality for Sugiyama scheme is not implemented yet."),(0,i.yg)("h4",{id:"calling-sugiama-scheme"},"Calling Sugiama Scheme"),(0,i.yg)("p",null,"There are two ways to ensure the Sugiyama Scheme. One way is to use the high level API:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"function layoutGraphWithSugiayma(\n  geomGraph: GeomGraph,\n  cancelToken: CancelToken,\n  transformToScreen: boolean,\n)\n")),(0,i.yg)("p",null,"The first parameter of the function is the graph under layout, the second is cancelToken to enable the method cancellation. The third argument, transformToScreen, when set to true will cause the geometry flip around the x-axis: transformation of the graph geometry by mapping (x,y) to (x, -y) and then shifting the graph into the first quadrand of the plane with the left-bottom of the graph at (0,0). The cancellation token is ignored by now, so null can be used for it."),(0,i.yg)("p",null,"Another method is to use property GeometryGraph.layoutSettings."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"geomGraph.layoutSettings = new SugiyamaLayoutSettings()\n// change the settings that you need\n//try to move layers closer to each other\ngeomGraph.layoutSettings.yLayerSep /= 2\n// change more settings here...\n// call the layout engine\ngeomGraph.layoutSettings.layoutGraphWithSugiayma(geomGraph, null, false)\n// or call\nlayoutGeomGraph(geomGraph) // and the setting will be respected\n")),(0,i.yg)("p",null,"In general, SugiyamaLayoutSetting property corresponds to the attributes of ",(0,i.yg)("a",{parentName:"p",href:"https://graphviz.org/doc/info/lang.html"},"Dot language"),".\nThe most popular settings to change in SugiyamaLayoutSettings is the layerDirection."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"SugiamaLayoutSettings.layerDirection: LayerDirectionEnum\n")),(0,i.yg)("p",null,"LayerDirectionEnum has values {TB, LR, BT, RL}, where TB means Top-Bottom, and is the default, LR means Left - Right, BT means Bottom - Top, and RL means Right - Left.\nThis enum comes from ",(0,i.yg)("a",{parentName:"p",href:"https://graphviz.org/docs/attrs/rankdir/"},"Graphvis's rankdir"),". To avoid layouts which are too wide for a graph with long node labels the value LR is often used. If you use \"Edit\" button on the graph below and change 'rankdir' to TB then you will get a layout with a wide and low bounding box."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-dot",metastring:"edit",edit:!0},'digraph G {\n    rankdir ="LR"\n    a [label = "long label for a"]\n    b [label = "long label for b"]\n    c [label = "long label for c"]\n    e [label = "long label for e"]\n    d [label = "sync node" ]\n    a -> d\n    b -> d\n    c -> d\n    e -> d\n}\n')),(0,i.yg)("img",{alt:"Generated graph",src:a(8011).A}),(0,i.yg)(r.A,{editorId:"dot",text:'digraph G {\n\trankdir ="LR"\n\ta [label = "long label for a"]\n\tb [label = "long label for b"]\n\tc [label = "long label for c"]\n\te [label = "long label for e"]\n\td [label = "sync node" ]\n\ta -> d\n\tb -> d\n\tc -> d\n    e -> d\n}',mdxType:"SideEditorButton"}),(0,i.yg)("p",null,"Function 'layoutGraphWithSugiayma()' does not require that geomGraph.layoutSettings is set, but if this property is undefined or\nits type is not SugiamaLayoutSettings then a new SugiamaLayoutSettings() is created and assigned to the property. Function 'layoutGeomGraph()' also can change this property as we will describe later."),(0,i.yg)("h3",{id:"pivot-multidimensional-scaling-or-pivot-mds"},"Pivot Multidimensional Scaling, or Pivot MDS"),(0,i.yg)("h4",{id:"the-method-background"},"The method background"),(0,i.yg)("p",null,"MDS tries to place the graph on the two dimensional plane with the least distortion of the distances between the nodes. You can find more details on ",(0,i.yg)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Multidimensional_scaling"},"Wikipedia"),". The method disregards the directions of the edges. Pivot MDS, which is implemented in MSAGL, is a variant of MDS that uses only a subset of pivot nodes for the calculation, making it faster and suitable for large graphs. While MDS uses an n by n matrix for the distances between the nodes, where n is the number of nodes, Pivot MDS uses a k","*","n matrix of the distances between each node and each of k pivot nodes. The implementation of Pivot MDS in the package follows ",(0,i.yg)("a",{parentName:"p",href:"https://kops.uni-konstanz.de/bitstream/handle/123456789/5741/bp_empmdsld_06.pdf?sequence=1&isAllowed=y"},"Eigensolver methods for progressive..."),"."),(0,i.yg)("p",null,"Pivot MDS ignores the node sizes and tends to create layouts where the nodes overlap each other. That is why it is followed by an overlap removal with the algorithm of ",(0,i.yg)("a",{parentName:"p",href:"https://arxiv.org/pdf/1608.02653"},"GTree"),". Another additional step, because MDS does not route the edges, is edge routing which is described in ",(0,i.yg)("a",{parentName:"p",href:"https://www.researchgate.net/profile/Tim-Dwyer-5/publication/43433413_Fast_Edge-Routing_for_Large_Graphs/links/0fcfd511cb774446dd000000/Fast-Edge-Routing-for-Large-Graphs.pdf"},"Fast edge-routing for large graphs"),"."),(0,i.yg)("h4",{id:"calling-mds"},"Calling MDS"),(0,i.yg)("p",null,"Calling"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"function layoutGraphWithMds(geomGraph: GeomGraph, cancelToken: CancelToken = null).\n")),(0,i.yg)("p",null,"will create default 'MDSLayoutSettings' and calculate the layout.\nIf the graph has several thousands node then the default settings might cause a slow run.\nInstead, create MDSLayoutSettings yourself and set IterationsWithMajorization to zero, to speed up."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"const settings = new MdsLayoutSettings()\nsettings.IterationsWithMajorization() = 0\ngeomGraph.layoutSettings = settings\n")),(0,i.yg)("p",null,"Each iteration with majorization step improves the node positions in a quadratic in the number of nodes time and can be sacrificed for the performance."),(0,i.yg)("h3",{id:"ipsepcola"},"IPSepCola"),(0,i.yg)("p",null,"It is a variant of a force directed layout with approximate computation of long-range node-node repulsive forces to achieve O(n log n) running time per iteration,\nwhere n is the number of node in a graph.\nIt can be invoked on an existing layout (for example, as computed by MDS) to beautify it.",(0,i.yg)("br",{parentName:"p"}),"\n","The method is described in ",(0,i.yg)("a",{parentName:"p",href:"https://www.researchgate.net/profile/Tim-Dwyer-5/publication/6715571_IPSep-CoLa_An_Incremental_Procedure_for_Separation_Constraint_Layout_of_Graphs/links/0fcfd5081c588735c8000000/IPSep-CoLa-An-Incremental-Procedure-for-Separation-Constraint-Layout-of-Graphs.pdf"},"IPSepCola"),". In MSAGL IPSepCola starts by applying MDS and then improves on it."),(0,i.yg)("h4",{id:"calling-ipsepcola"},"Calling IPSepCola"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"const settings = new IPsepColaSetting()\n/**\n * The third parameter of the method is the constraint level.\n * The value 2 of the constraint level means that the algorithm will try to satisfy most of the separation constraints, i.e. node separation.\n */\nconst runner = new IPSepCola(geomGraph, settings, 2)\nrunner.run()\n")),(0,i.yg)("h3",{id:"the-default-layout"},"The default layout"),(0,i.yg)("p",null,"When 'layoutGeomGraph()' is called for a GeomGraph with undefined layout settings then a layout is",(0,i.yg)("br",{parentName:"p"}),"\n","chosen by the following logic: If the graph is directed, and the number of nodes in the graph is not greater than 2000, and the number of edges in the graph is not greater than 4000,\nthen the Sugiyama Scheme is called. Otherwise, IPSepCola is called."),(0,i.yg)("p",null,"Graph is directed, for MSAGL, if it has at least one directed edge, and edge e is directed if e.sourceArrowhead or e.targetArrowhead is not null."),(0,i.yg)("h2",{id:"edge-routing"},"Edge routing"),(0,i.yg)("p",null,"There are following edge routing modes"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"export enum EdgeRoutingMode {\n  Spline,\n\n  SplineBundling,\n\n  StraightLine,\n\n  SugiyamaSplines,\n\n  Rectilinear,\n\n  None,\n}\n")),(0,i.yg)("p",null,"'SugiyamaSpline' is used only with the Sugiyama Scheme. The rest of the modes can be used with any layout. If the mode is None the edges are not routed."),(0,i.yg)("h3",{id:"spline-routing-mode"},'"Spline" routing mode'),(0,i.yg)("p",null,"In this mode the edges are routed around the nodes. The method is rather fast, but unfortunately we do not have a\nprecize complexity measure. For a graph with 2K nodes+edges it can do the routing in less than a second or two. For a graph with 17k nodes+edges it might require half a minute."),(0,i.yg)("p",null,"The algorithm runs shortest paths on ",(0,i.yg)("a",{parentName:"p",href:"https://www.researchgate.net/profile/Tim-Dwyer-5/publication/43433413_Fast_Edge-Routing_for_Large_Graphs/links/0fcfd511cb774446dd000000/Fast-Edge-Routing-for-Large-Graphs.pdf"},"a graph spanner")," as the first step and then optimizes the paths by using ",(0,i.yg)("a",{parentName:"p",href:"https://www.sciencedirect.com/science/article/pii/002200008990041X/pdf?md5=aa398f6c4c6e17f6aa1688b7e5545cb9&pid=1-s2.0-002200008990041X-main.pdf"},"the funnel algorithm"),". The implementation in MSAGLJS uses a new version of routing compared with\nMSAGL.NET. This version is described in ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/levnach/paper_msagljs/blob/main/main.pdf"},"New edge routing algorithm, and the tiling scheme in MSAGLJS"),".\nThe paper also describes ",(0,i.yg)("em",{parentName:"p"},"tiling"),": the feature allowing to browse a large graph similar to the online geographical maps. Only the WebGL viewer supports this feature."),(0,i.yg)("p",null,'Below is an example of routing in "Spline" mode.\n',(0,i.yg)("img",{alt:"Alt text",src:a(922).A+"#gh-light-mode-only"}),"\n",(0,i.yg)("img",{alt:"Alt text",src:a(5004).A+"#gh-dark-mode-only"})),(0,i.yg)("h3",{id:"splinebundling-routing-mode"},'"SplineBundling" routing mode'),(0,i.yg)("p",null,"This algorithm routes edges in the metroline style. The method is described in ",(0,i.yg)("a",{parentName:"p",href:"https://arxiv.org/pdf/1209.4227.pdf"},"\u201cEdge routing with ordered bundles\u201d"),". The algorithm is not very efficient and is slower than the spline routing.\nIn the drawing below the layout is the same but the edges are routed with the SplineBundling algorithm."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Alt text",src:a(1391).A+"#gh-light-mode-only"}),"\n",(0,i.yg)("img",{alt:"Alt text",src:a(5843).A+"#gh-dark-mode-only"})),(0,i.yg)("h3",{id:"rectilinear-routing-mode"},'"Rectilinear" routing mode'),(0,i.yg)("p",null,'The method routes edges with segments parallel to the coordinate axes, with an optional arcs at the corners. The mode is not fast, slower than "SplineBundling", and might slow down considerably even on a graph with 90 nodes.\n',(0,i.yg)("img",{alt:"Alt text",src:a(4177).A+"#gh-light-mode-only"}),"\n",(0,i.yg)("img",{alt:"Alt text",src:a(1453).A+"#gh-dark-mode-only",width:"370",height:"135"})),(0,i.yg)("h3",{id:"straightline-routing-mode"},'"StraightLine" routing mode'),(0,i.yg)("p",null,"It is the fastest mode that routes each edge as a straight line clipped at the source and the target. This mode is a good fallback for a very large graph."),(0,i.yg)("h2",{id:"renderer-with-deckgl"},"Renderer with Deck.gl"),(0,i.yg)("p",null,"Constructor:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"new Renderer(container?: HTMLDivElement)\n")),(0,i.yg)("p",null,"To layout and render a new graph:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"renderer.setGraph(g: Graph, options: RenderOptions)\n")),(0,i.yg)("p",null,"To change the layout of the current graph:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"renderer.setOptions(options: LayoutOptions)\n")),(0,i.yg)("h2",{id:"usage-of-svg-renderer"},"Usage of SVG Renderer"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts",metastring:"build",build:!0},"import { parseDot } from '@msagl/parser'\nimport { RendererSvg } from '@msagl/renderer-svg'\nconst renderer = new RendererSvg()\nconst graph = parseDot(`\ngraph G {\n    kspacey -- swilliams;\n    swilliams -- kbacon;\n    bpitt -- kbacon;\n    hford -- lwilson;\n    lwilson -- kbacon;\n}`)\nrenderer.setGraph(graph)\n")),(0,i.yg)("h2",{id:"renderer-with-svg-api"},"Renderer with SVG API"),(0,i.yg)("p",null,"Constructor:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"rendererSvg=new RendererSVG(container?: HTMLDivElement)\n")),(0,i.yg)("p",null,"To layout and render a new graph:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"rendererSvg.setGraph(g: Graph, options: RenderOptions)\n")),(0,i.yg)("p",null,"To change the layout of the current graph:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"rendererSvg.setOptions(options: LayoutOptions)\n")),(0,i.yg)("p",null,"To get the SVG representation of the graph:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"getSvg(): SVGAElement\n")))}p.isMDXComponent=!0},8011:(e,t,a)=>{a.d(t,{A:()=>n});const n="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHRhYmluZGV4PSIwIj48ZyB0cmFuc2Zvcm09Im1hdHJpeCgxLDAsMCwxLCAwLCAwKSI+PGcgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsLTEsIDAsMCkiPjxnPjxwYXRoIGlkPSJib3VuZGFyeUN1cnZlIiBmaWxsPSJub25lIiBkPSJNIDEzLjMzNjkxNDA2MjUgOTEgTCA4Mi4zMDk1NzAzMTI1IDkxIEEgMywzIDAgMCAxIDg1LjMwOTU3MDMxMjUgOTQgTCA4NS4zMDk1NzAzMTI1IDEwNC40IEEgMywzIDAgMCAxIDgyLjMwOTU3MDMxMjUgMTA3LjQgTCAxMy4zMzY5MTQwNjI1IDEwNy40IEEgMywzIDAgMCAxIDEwLjMzNjkxNDA2MjUgMTA0LjQgTCAxMC4zMzY5MTQwNjI1IDk0IEEgMywzIDAgMCAxIDEzLjMzNjkxNDA2MjUgOTEiIHN0cm9rZT0iQmxhY2siIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0IGlkPSJub2RlTGFiZWwiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQ3LjgyMzI0MjE4NzUiIGZpbGw9InJnYmEoMCwwLDAsMSkiIGZvbnQtZmFtaWx5PSJUaW1lcy1Sb21hbiIgZm9udC1zaXplPSIxMnB4IiB0cmFuc2Zvcm09InNjYWxlKDEsLTEpIj48dHNwYW4gaWQ9IjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQ3LjgyMzI0MjE4NzUiIGFsaWdubWVudC1iYXNlbGluZT0ibWlkZGxlIiB5PSItOTkuMiI+bG9uZyBsYWJlbCBmb3IgYTwvdHNwYW4+PC90ZXh0PjwvZz48Zz48cGF0aCBpZD0iYm91bmRhcnlDdXJ2ZSIgZmlsbD0ibm9uZSIgZD0iTSAxMyA2NCBMIDgyLjY0NjQ4NDM3NSA2NCBBIDMsMyAwIDAgMSA4NS42NDY0ODQzNzUgNjcgTCA4NS42NDY0ODQzNzUgNzcuMzk5OTk5OTk5OTk5OTkgQSAzLDMgMCAwIDEgODIuNjQ2NDg0Mzc1IDgwLjM5OTk5OTk5OTk5OTk5IEwgMTMgODAuMzk5OTk5OTk5OTk5OTkgQSAzLDMgMCAwIDEgMTAgNzcuMzk5OTk5OTk5OTk5OTkgTCAxMCA2NyBBIDMsMyAwIDAgMSAxMyA2NCIgc3Ryb2tlPSJCbGFjayIgc3Ryb2tlLXdpZHRoPSIxIi8+PHRleHQgaWQ9Im5vZGVMYWJlbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDcuODIzMjQyMTg3NSIgZmlsbD0icmdiYSgwLDAsMCwxKSIgZm9udC1mYW1pbHk9IlRpbWVzLVJvbWFuIiBmb250LXNpemU9IjEycHgiIHRyYW5zZm9ybT0ic2NhbGUoMSwtMSkiPjx0c3BhbiBpZD0iMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDcuODIzMjQyMTg3NSIgYWxpZ25tZW50LWJhc2VsaW5lPSJtaWRkbGUiIHk9Ii03Mi4xOTk5OTk5OTk5OTk5OSI+bG9uZyBsYWJlbCBmb3IgYjwvdHNwYW4+PC90ZXh0PjwvZz48Zz48cGF0aCBpZD0iYm91bmRhcnlDdXJ2ZSIgZmlsbD0ibm9uZSIgZD0iTSAxMy4zMzY5MTQwNjI1IDM2Ljk5OTk5OTk5OTk5OTk5IEwgODIuMzA5NTcwMzEyNSAzNyBBIDMsMyAwIDAgMSA4NS4zMDk1NzAzMTI1IDQwIEwgODUuMzA5NTcwMzEyNSA1MC4zOTk5OTk5OTk5OTk5OSBBIDMsMyAwIDAgMSA4Mi4zMDk1NzAzMTI1IDUzLjM5OTk5OTk5OTk5OTk5IEwgMTMuMzM2OTE0MDYyNSA1My4zOTk5OTk5OTk5OTk5OSBBIDMsMyAwIDAgMSAxMC4zMzY5MTQwNjI1IDUwLjM5OTk5OTk5OTk5OTk5IEwgMTAuMzM2OTE0MDYyNSAzOS45OTk5OTk5OTk5OTk5OSBBIDMsMyAwIDAgMSAxMy4zMzY5MTQwNjI1IDM2Ljk5OTk5OTk5OTk5OTk5IiBzdHJva2U9IkJsYWNrIiBzdHJva2Utd2lkdGg9IjEiLz48dGV4dCBpZD0ibm9kZUxhYmVsIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0Ny44MjMyNDIxODc1IiBmaWxsPSJyZ2JhKDAsMCwwLDEpIiBmb250LWZhbWlseT0iVGltZXMtUm9tYW4iIGZvbnQtc2l6ZT0iMTJweCIgdHJhbnNmb3JtPSJzY2FsZSgxLC0xKSI+PHRzcGFuIGlkPSIwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0Ny44MjMyNDIxODc1IiBhbGlnbm1lbnQtYmFzZWxpbmU9Im1pZGRsZSIgeT0iLTQ1LjE5OTk5OTk5OTk5OTk5Ij5sb25nIGxhYmVsIGZvciBjPC90c3Bhbj48L3RleHQ+PC9nPjxnPjxwYXRoIGlkPSJib3VuZGFyeUN1cnZlIiBmaWxsPSJub25lIiBkPSJNIDEzLjMzNjkxNDA2MjUgOS45OTk5OTk5OTk5OTk5OTYgTCA4Mi4zMDk1NzAzMTI1IDkuOTk5OTk5OTk5OTk5OTk1IEEgMywzIDAgMCAxIDg1LjMwOTU3MDMxMjUgMTIuOTk5OTk5OTk5OTk5OTk2IEwgODUuMzA5NTcwMzEyNSAyMy4zOTk5OTk5OTk5OTk5OTUgQSAzLDMgMCAwIDEgODIuMzA5NTcwMzEyNSAyNi4zOTk5OTk5OTk5OTk5OTUgTCAxMy4zMzY5MTQwNjI1IDI2LjM5OTk5OTk5OTk5OTk5NSBBIDMsMyAwIDAgMSAxMC4zMzY5MTQwNjI1IDIzLjM5OTk5OTk5OTk5OTk5NSBMIDEwLjMzNjkxNDA2MjUgMTIuOTk5OTk5OTk5OTk5OTk2IEEgMywzIDAgMCAxIDEzLjMzNjkxNDA2MjUgOS45OTk5OTk5OTk5OTk5OTYiIHN0cm9rZT0iQmxhY2siIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0IGlkPSJub2RlTGFiZWwiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQ3LjgyMzI0MjE4NzUiIGZpbGw9InJnYmEoMCwwLDAsMSkiIGZvbnQtZmFtaWx5PSJUaW1lcy1Sb21hbiIgZm9udC1zaXplPSIxMnB4IiB0cmFuc2Zvcm09InNjYWxlKDEsLTEpIj48dHNwYW4gaWQ9IjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQ3LjgyMzI0MjE4NzUiIGFsaWdubWVudC1iYXNlbGluZT0ibWlkZGxlIiB5PSItMTguMTk5OTk5OTk5OTk5OTk2Ij5sb25nIGxhYmVsIGZvciBlPC90c3Bhbj48L3RleHQ+PC9nPjxnPjxwYXRoIGlkPSJib3VuZGFyeUN1cnZlIiBmaWxsPSJub25lIiBkPSJNIDExOC42NDY0ODQzNzUgMzYuOTk5OTk5OTk5OTk5OTg2IEwgMTYyLjk2ODc1IDM2Ljk5OTk5OTk5OTk5OTk5IEEgMywzIDAgMCAxIDE2NS45Njg3NSAzOS45OTk5OTk5OTk5OTk5OSBMIDE2NS45Njg3NSA1MC4zOTk5OTk5OTk5OTk5OSBBIDMsMyAwIDAgMSAxNjIuOTY4NzUgNTMuMzk5OTk5OTk5OTk5OTkgTCAxMTguNjQ2NDg0Mzc1IDUzLjM5OTk5OTk5OTk5OTk5IEEgMywzIDAgMCAxIDExNS42NDY0ODQzNzUgNTAuMzk5OTk5OTk5OTk5OTkgTCAxMTUuNjQ2NDg0Mzc1IDM5Ljk5OTk5OTk5OTk5OTk4NiBBIDMsMyAwIDAgMSAxMTguNjQ2NDg0Mzc1IDM2Ljk5OTk5OTk5OTk5OTk4NiIgc3Ryb2tlPSJCbGFjayIgc3Ryb2tlLXdpZHRoPSIxIi8+PHRleHQgaWQ9Im5vZGVMYWJlbCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTQwLjgwNzYxNzE4NzUiIGZpbGw9InJnYmEoMCwwLDAsMSkiIGZvbnQtZmFtaWx5PSJUaW1lcy1Sb21hbiIgZm9udC1zaXplPSIxMnB4IiB0cmFuc2Zvcm09InNjYWxlKDEsLTEpIj48dHNwYW4gaWQ9IjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE0MC44MDc2MTcxODc1IiBhbGlnbm1lbnQtYmFzZWxpbmU9Im1pZGRsZSIgeT0iLTQ1LjE5OTk5OTk5OTk5OTk5Ij5zeW5jIG5vZGU8L3RzcGFuPjwvdGV4dD48L2c+PGc+PHBhdGggaWQ9ImN1cnZlIiBmaWxsPSJub25lIiBzdHJva2U9IkJsYWNrIiBzdHJva2Utb3BhY2l0eT0iMSIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNIDcwLjQxMjY4NTk3MDM2Mjg3IDkxLjAwMDAwMDAwMDAwMDAxIEM4My4yMTIzNDI2NjI5NDUyOCA4NS45ODAyODQzOTYyMTkyIDk3Ljg3MTc0NjU4NjA4MTQ5IDc3LjI5NjA5ODUxNjEzODA5IDExNC4zOTA4OTc3Mzk3NzEyOCA2NC45NDc0NDIzNTk3NTY2NSBMIDEyNS44MzM1MTAyODMzMDcwOCA1Ni4zOTM2ODAzMzQzMjM1OCIvPjxwb2x5Z29uIGlkPSJ0YXJnZXRBcnIiIHN0cm9rZT0iQmxhY2siIHN0cm9rZS1vcGFjaXR5PSIxIiBzdHJva2Utd2lkdGg9IjEiIHBvaW50cz0iMTI2LjQ5NzE5MzIzNTA4NTc1IDU3LjI4MTUwODAzNDc0MDQ2IDEyOS44MzgyNDIyNDEzNjQyNCA1My4zOTk5OTk5OTk5OTk5OSAxMjUuMTY5ODI3MzMxNTI4NDEgNTUuNTA1ODUyNjMzOTA2NjkiIGZpbGw9IkJsYWNrIi8+PC9nPjxnPjxwYXRoIGlkPSJjdXJ2ZSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJCbGFjayIgc3Ryb2tlLW9wYWNpdHk9IjEiIHN0cm9rZS13aWR0aD0iMSIgZD0iTSA3Ni4wNjI5NDEyNjE1NzQxMSA2NCBMIDExMS41MjkyMDg2ODE2MzE5OSA1My43MDE2MTE0NzY3NTAxMiIvPjxwb2x5Z29uIGlkPSJ0YXJnZXRBcnIiIHN0cm9rZT0iQmxhY2siIHN0cm9rZS1vcGFjaXR5PSIxIiBzdHJva2Utd2lkdGg9IjEiIHBvaW50cz0iMTExLjgzODMxMDIzNzE5MjYzIDU0Ljc2NjExNTczNDM1NTEgMTE2LjMzMDg3NzA4ODU5NTIzIDUyLjMwNzM0NDQ2MTU4NzUzIDExMS4yMjAxMDcxMjYwNzEzNCA1Mi42MzcxMDcyMTkxNDUxMzYiIGZpbGw9IkJsYWNrIi8+PC9nPjxnPjxwYXRoIGlkPSJjdXJ2ZSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJCbGFjayIgc3Ryb2tlLW9wYWNpdHk9IjEiIHN0cm9rZS13aWR0aD0iMSIgZD0iTSA4NS4zMDk1NzAzMTI1IDQ1LjE5OTk5OTk5OTk5OTk5IEwgMTEwLjY0NjQ4NDM3NSA0NS4xOTk5OTk5OTk5OTk5OSIvPjxwb2x5Z29uIGlkPSJ0YXJnZXRBcnIiIHN0cm9rZT0iQmxhY2siIHN0cm9rZS1vcGFjaXR5PSIxIiBzdHJva2Utd2lkdGg9IjEiIHBvaW50cz0iMTEwLjY0NjQ4NDM3NSA0Ni4zMDg0NzMzMTMyMTQ2OSAxMTUuNjQ2NDg0Mzc1IDQ1LjE5OTk5OTk5OTk5OTk5IDExMC42NDY0ODQzNzUgNDQuMDkxNTI2Njg2Nzg1Mjg2IiBmaWxsPSJCbGFjayIvPjwvZz48Zz48cGF0aCBpZD0iY3VydmUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iQmxhY2siIHN0cm9rZS1vcGFjaXR5PSIxIiBzdHJva2Utd2lkdGg9IjEiIGQ9Ik0gNzYuMDYyOTQxMjYxNTc0MTEgMjYuMzk5OTk5OTk5OTk5OTk1IEwgMTExLjUyOTIwODY4MTYzMTk5IDM2LjY5ODM4ODUyMzI0OTg3Ii8+PHBvbHlnb24gaWQ9InRhcmdldEFyciIgc3Ryb2tlPSJCbGFjayIgc3Ryb2tlLW9wYWNpdHk9IjEiIHN0cm9rZS13aWR0aD0iMSIgcG9pbnRzPSIxMTEuMjIwMTA3MTI2MDcxMzQgMzcuNzYyODkyNzgwODU0ODUgMTE2LjMzMDg3NzA4ODU5NTIzIDM4LjA5MjY1NTUzODQxMjQ1IDExMS44MzgzMTAyMzcxOTI2MyAzNS42MzM4ODQyNjU2NDQ4OSIgZmlsbD0iQmxhY2siLz48L2c+PC9nPjwvZz48L3N2Zz4="},5843:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/bundleRouting.dark-48acdb2cb04ae31694c275e5c46afb77.svg"},1391:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/bundleRouting-48acdb2cb04ae31694c275e5c46afb77.svg"},1453:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/rectRouting.dark-abf5da99f2e00f042020eb3b3bc6504d.svg"},4177:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/rectRouting-c2c943240cee4f26ae88590942a70717.svg"},5004:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/splineRouting.dark-1558d65f521338dcd5c423d77b045197.svg"},922:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/splineRouting-1558d65f521338dcd5c423d77b045197.svg"}}]);